#include <stdio.h>
#include <stdlib.h>

int main() {
    int n;
    printf("Enter n: ");
    if (scanf("%d", &n) != 1) return 0;

    int *push = malloc(n * sizeof(int));
    int *pop  = malloc(n * sizeof(int));
    for (int i = 0; i < n; i++) scanf("%d", &push[i]);
    for (int i = 0; i < n; i++) scanf("%d", &pop[i]);

    int *stack = malloc(n * sizeof(int));
    int top = -1;    // empty stack
    int j = 0;       // index in push[]
    int k = 0;       // index in pop[]

    while (j < n) {
        // push next element
        stack[++top] = push[j++];

        // pop while top matches next needed pop element
        while (top >= 0 && k < n && stack[top] == pop[k]) {
            top--;
            k++;
        }
    }

    if (k == n) printf("Valid stack sequence\n");
    else printf("Not a valid stack sequence\n");

    free(push); free(pop); free(stack);
    return 0;
}
